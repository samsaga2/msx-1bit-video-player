        module bios

        ;; from http://www.konamiman.com/msx/msx2th/th-ap.txt + emacs macros

        ;; --- main bios calls ---
CHKRAM  equ 0x0000
VRDVDP 	equ	0x0006
VWRVDP 	equ	0x0007
SYNCHR  equ 0x0008
RDSLT   equ 0x000c
CHRGTR  equ 0x0010
WRSLT   equ 0x0014
OUTDO   equ 0x0018
CALSLT  equ 0x001c
DCOMPR  equ 0x0020
ENASLT  equ 0x0024
GETYPR  equ 0x0028
CALLF   equ 0x0030
KEYINT  equ 0x0038
        ;; I/O initialisation
INITIO  equ 0x003b
INIFNK  equ 0x003e
        ;; VDP access
DISSCR  equ 0x0041
ENASCR  equ 0x0044
WRTVDP  equ 0x0047
RDVRM   equ 0x004a
WRTVRM  equ 0x004d
SETRD   equ 0x0050
SETWRT  equ 0x0053
FILVRM  equ 0x0056
LDIRMV  equ 0x0059
LDIRVM  equ 0x005c
CHGMOD  equ 0x005f
CHGCLR  equ 0x0062
NMI     equ 0x0066
CLRSPR  equ 0x0069
INITXT  equ 0x006c
INIT32  equ 0x006f
INIGRP  equ 0x0072
INIMLT  equ 0x0075
SETTXT  equ 0x0078
SETT32  equ 0x007b
SETGRP  equ 0x007e
SETMLT  equ 0x0081
CALPAT  equ 0x0084
CALATR  equ 0x0087
GSPSIZ  equ 0x008a
GRPPRT  equ 0x008d
        ;; PSG
GICINI  equ 0x0090
WRTPSG  equ 0x0093
RDPSG   equ 0x0096
STRTMS  equ 0x0099
        ;; Keyboard, CRT, printer input-output
CHSNS   equ 0x009c
CHGET   equ 0x009f
CHPUT   equ 0x00a2
LPTOUT  equ 0x00a5
LPTSTT  equ 0x00a8
CNVCHR  equ 0x00ab
PINLIN  equ 0x00ae
INLIN   equ 0x00b1
QINLIN  equ 0x00b4
BREAKX  equ 0x00b7
BEEP    equ 0x00c0
CLS     equ 0x00c3
POSIT   equ 0x00c6
FNKSB   equ 0x00c9
ERAFNK  equ 0x00cc
DSPFNK  equ 0x00cf
TOTEXT  equ 0x00d2
        ;; Game I/O access
GTSTCK  equ 0x00d5
GTTRIG  equ 0x00d8
GTPAD   equ 0x00db
GTPDL   equ 0x00de
        ;; Cassette input-output routine
TAPION  equ 0x00e1
TAPIN   equ 0x00e4
TAPIOF  equ 0x00e7
TAPOON  equ 0x00ea
TAPOUT  equ 0x00ed
TAPOOF  equ 0x00f0
STMOTR  equ 0x00f3
        ;; Miscellaneous
CHGCAP  equ 0x0132
CHGSND  equ 0x0135
RSLREG  equ 0x0138
WSLREG  equ 0x013b
RDVDP   equ 0x013e
SNSMAT  equ 0x0141
PHYDIO  equ 0x0144
ISFLIO  equ 0x014a
OUTDLP  equ 0x014d
KILBUF  equ 0x0156
CALBAS  equ 0x0159
        ;; Entries appended for MSX2
SUBROM  equ 0x015c
EXTROM  equ 0x015f
EOL     equ 0x0168
BIGFIL  equ 0x016b
NSETRD  equ 0x016e
NSTWRT  equ 0x0171
NRDVRM  equ 0x0174
NWRVRM  equ 0x0177
CHGCPU  equ 0x0180

        ;; --- subrom bios calls ---
GRPRT   equ 0x0089
NVBXLN  equ 0x00c9
NVBXFL  equ 0x00cd
CLSSUB  equ 0x0115
VDPSTA  equ 0x0131
SETPAG  equ 0x013d
INIPLT  equ 0x0141
RSTPLT  equ 0x0145
GETPLT  equ 0x0149
SETPLT  equ 0x014d
PROMPT  equ 0x0181
NEWPAD  equ 0x01ad
CHGMDP  equ 0x01b5
KNJPRT  equ 0x01bd
REDCLK  equ 0x01f5
WRTCLK  equ 0x01f9

        ;; --- work area ---
RDPRIM  equ 0xf380
WRPRIM  equ 0xf385
CLPRIM  equ 0xf38c
        ;; Starting address of assembly language program of USR function, text screen
USRTAB  equ 0xf39a
LINL40  equ 0xf3ae
LINL32  equ 0xf3af
LINLEN  equ 0xf3b0
CRTCNT  equ 0xf3b1
CLMLST  equ 0xf3b2
        ;; SCREEN 0
TXTNAM  equ 0xf3b3
TXTCOL  equ 0xf3b5
TXTCGP  equ 0xf3b7
TXTATR  equ 0xf3b9
TXTPAT  equ 0xf3bb
        ;; SCREEN 1
T32NAM  equ 0xf3bd
T32COL  equ 0xf3bf
T32CGP  equ 0xf3c1
T32ATR  equ 0xf3c3
T32PAT  equ 0xf3c5
        ;; SCREEN 2
GRPNAM  equ 0xf3c7
GRPCOL  equ 0xf3c9
GRPCGP  equ 0xf3cb
GRPATR  equ 0xf3cd
GRPPAT  equ 0xf3cf
        ;; SCREEN 3
MLTNAM  equ 0xf3d1
MLTCOL  equ 0xf3d3
MLTCGP  equ 0xf3d5
MLTATR  equ 0xf3d7
MLTPAT  equ 0xf3d9
        ;; Other screen settings
CLIKSW  equ 0xf3db
CSRY    equ 0xf3dc
CSRX    equ 0xf3dd
CNSDFG  equ 0xf3de
        ;; Area to save VDP registers
RG0SAV  equ 0xf3df
RG1SAV  equ 0xf3e0
RG2SAV  equ 0xf3e1
RG3SAV  equ 0xf3e2
RG4SAV  equ 0xf3e3
RG5SAV  equ 0xf3e4
RG6SAV  equ 0xf3e5
RG7SAV  equ 0xf3e6
RG8SAV  equ 0xffe7
RG9SAV  equ 0xffe8
STATFL  equ 0xf3e7
TRGFLG  equ 0xf3e8
FORCLR  equ 0xf3e9
BAKCLR  equ 0xf3ea
BDRCLR  equ 0xf3eb
MAXUPD  equ 0xf3ec
MINUPD  equ 0xf3ef
ATRBYT  equ 0xf3f2
        ;; Work area for PLAY statement
QUEUES  equ 0xf3f3
FRCNEW  equ 0xf3f5
        ;; Work area for key input
SCNCNT  equ 0xf3f6
REPCNT  equ 0xf3f7
PUTPNT  equ 0xf3f8
GETPNT  equ 0xf3fa
        ;; Parameters for Cassette
CS120   equ 0xf3fc
LOW     equ 0xf406
HIGH    equ 0xf408
HEADER  equ 0xf40a
ASPCT1  equ 0xf40b
ASPCT2  equ 0xf40d
ENDPRG  equ 0xf40f
        ;; Work used by BASIC internally
ERRFLG  equ 0xf414
LPTPOS  equ 0xf415
PRTFLG  equ 0xf416
NTMSXP  equ 0xf417
RAWPRT  equ 0xf418
VLZADR  equ 0xf419
VLZDAT  equ 0xf41b
CURLIN  equ 0xf41c
KBUF    equ 0xf41f
BUFMIN  equ 0xf55d
BUF     equ 0xf55e
ENDBUF  equ 0xf660
TTYPOS  equ 0xf661
DIMFLG  equ 0xf662
VALTYP  equ 0xf663
DORES   equ 0xf664
DONUM   equ 0xf665
CONTXT  equ 0xf666
CONSAV  equ 0xf668
CONTYP  equ 0xf669
CONLO   equ 0xf66a
MEMSIZ  equ 0xf672
STKTOP  equ 0xf674
TXTTAB  equ 0xf676
TEMPPT  equ 0xf768
TEMPST  equ 0xf67a
DSCTMP  equ 0xf698
FRETOP  equ 0xf69b
TEMP3   equ 0xf69d
TEMP8   equ 0xf69f
ENDFOR  equ 0xf6a1
SUBFLG  equ 0xf6a5
FLGINP  equ 0xf6a6
TEMP    equ 0xf6a7
PTRFLG  equ 0xf6a9
AUTFLG  equ 0xf6aa
AUTLIN  equ 0xf6ab
AUTINC  equ 0xf6ad
SAVTXT  equ 0xf6af
ERRLIN  equ 0xf6b3
DOT     equ 0xf6b5
ERRTXT  equ 0xf6b7
ONELIN  equ 0xf6b9
ONEFLG  equ 0xf6bb
TEMP2   equ 0xf6bc
OLDLIN  equ 0xf6be
OLDTXT  equ 0xf6c0
VARTAB  equ 0xf6c2
ARYTAB  equ 0xf6c4
STREND  equ 0xf6c6
DATPTR  equ 0xf6c8
DEFTBL  equ 0xf6ca
PRMSTK  equ 0xf6e4
PRMLEN  equ 0xf6e6
PARM1   equ 0xf6e8
PRMPRV  equ 0xf74c
PRMLN2  equ 0xf74e
PARM2   equ 0xf750
PRMFLG  equ 0xf7b4
ARYTA2  equ 0xf7b5
NOFUNS  equ 0xf7b7
TEMP9   equ 0xf7b8
FUNACT  equ 0xf7ba
SWPTMP  equ 0xf7bc
TRCFLG  equ 0xf7c4
        ;; Work for Math-Pack
FBUFFR  equ 0xf7c5
DECTMP  equ 0xf7f0
DECTM2  equ 0xf7f2
DECCNT  equ 0xf7f4
DAC     equ 0xf7f6
HOLD8   equ 0xf806
HOLD2   equ 0xf836
HOLD    equ 0xf83e
ARG     equ 0xf847
RNDX    equ 0xf857
        ;; Data area used by BASIC interpreter
MAXFIL  equ 0xf85f
FILTAB  equ 0xf860
NULBUF  equ 0xf862
PTRFIL  equ 0xf864
RUNFLG  equ 0xf866
FILNAM  equ 0xf866
FILNM2  equ 0xf871
NLONLY  equ 0xf87c
SAVEND  equ 0xf87d
FNKSTR  equ 0xf87f
CGPNT   equ 0xf91f
NAMBAS  equ 0xf922
CGPBAS  equ 0xf924
PATBAS  equ 0xf926
ATRBAS  equ 0xf928
CLOC    equ 0xf92a
CMASK   equ 0xf92c
MINDEL  equ 0xf92d
MAXDEL  equ 0xf92f
        ;; Data area used by CIRCLE statement
ASPECT  equ 0xf931
CENCNT  equ 0xf933
CLINEF  equ 0xf935
CNPNTS  equ 0xf936
CPLOTF  equ 0xf938
CPCNT   equ 0xf939
CPNCNT8 equ 0xf93b
CPCSUM  equ 0xf93d
CSTCNT  equ 0xf93f
CSCLXY  equ 0xf941
CSAVEA  equ 0xf942
CSAVEM  equ 0xf944
CXOFF   equ 0xf945
CYOFF   equ 0xf947
        ;; Data area used in PAINT statement
LOHMSK  equ 0xf949
LOHDIR  equ 0xf94a
LOHADR  equ 0xf94b
LOHCNT  equ 0xf94d
SKPCNT  equ 0xf94f
MIVCNT  equ 0xf951
PDIREC  equ 0xf953
LFPROG  equ 0xf954
RTPROG  equ 0xf955
        ;; Data area used in PLAY statement
MCLTAB  equ 0xf956
MCLFLG  equ 0xf958
QUETAB  equ 0xf959
QUEBAK  equ 0xf971
VOICAQ  equ 0xf975
VOICBQ  equ 0xf9f5
VOICCQ  equ 0xfa75
        ;; Work area added in MSX2
DPPAGE  equ 0xfaf5
ACPAGE  equ 0xfaf6
AVCSAV  equ 0xfaf7
EXBRSA  equ 0xfaf8
CHRCNT  equ 0xfaf9
ROMA    equ 0xfafa
MODE    equ 0xfafc
NORUSE  equ 0xfafd
XSAVE   equ 0xfafe
YSAVE   equ 0xfb00
LOGOPR  equ 0xfb02
        ;; Data area used by RS-232C
RSTMP   equ 0xfb03
TOCNT   equ 0xfb03
RSFCB   equ 0xfb04
RSIQLN  equ 0xfb06
MEXBIH  equ 0xfb07
OLDSTT  equ 0xfb0c
OLDINT  equ 0xfb12
DEVNUM  equ 0xfb17
DATCNT  equ 0xfb18
ERRORS  equ 0xfb1b
FLAGS   equ 0xfb1c
ESTBLS  equ 0xfb1d
COMMSK  equ 0xfb1e
LSTCOM  equ 0xfb1f
LSTMOD  equ 0xfb20
        ;; Data area used by PLAY statement
PRSCNT  equ 0xfb35
SAVSP   equ 0xfb36
VOICEN  equ 0xfb38
SAVVOL  equ 0xfb39
MCLLEN  equ 0xfb3b
MCLPTR  equ 0xfb3c
QUEUEN  equ 0xfb3e
MUSICF  equ 0xfc3f
PLYCNT  equ 0xfb40
        ;; Voice static data area
VCBA    equ 0xfb41
VCBB    equ 0xfb66
VCBC    equ 0xfb8b
        ;; Data area
ENSTOP  equ 0xfbb0
BASROM  equ 0xfbb1
LINTTB  equ 0xfbb2
FSTPOS  equ 0xfbca
CODSAV  equ 0xfbcc
FNKSW1  equ 0xfbcd
FNKFLG  equ 0xfbce
ONGSBF  equ 0xfbd8
CLIKFL  equ 0xfbd9
OLDKEY  equ 0xfbda
NEWKEY  equ 0xfbe5
KEYBUF  equ 0xfbf0
LINWRK  equ 0xfc18
PATWRK  equ 0xfc40
BOTTOM  equ 0xfc48
HIMEM   equ 0xfc4a
TRAPTBL equ 0xfc4c
RTYCNT  equ 0xfc9a
INTFLG  equ 0xfc9b
PADY    equ 0xfc9c
PADX    equ 0xfc9d
JIFFY   equ 0xfc9e
INTVAL  equ 0xfca0
INTCNT  equ 0xfca2
LOWLIM  equ 0xfca4
WINWID  equ 0xfca5
GRPHED  equ 0xfca6
ESCCNT  equ 0xfca7
INSFLG  equ 0xfca8
CSRSW   equ 0xfca9
CSTYLE  equ 0xfcaa
CAPST   equ 0xfcab
KANAST  equ 0xfcac
KANAMD  equ 0xfcad
FLBMEM  equ 0xfcae
SCRMOD  equ 0xfcaf
OLDSCR  equ 0xfcb0
CASPRV  equ 0xfcb1
BRDATR  equ 0xfcb2
GXPOS   equ 0xfcb3
GYPOS   equ 0xfcb5
GRPACX  equ 0xfcb7
GRPACY  equ 0xfcb9
DRWFLG  equ 0xfcbb
DRWSCL  equ 0xfcbc
DRWANG  equ 0xfcbd
RUNBNF  equ 0xfcbe
SAVENT  equ 0xfcbf
EXPTBL  equ 0xfcc1
SLTTBL  equ 0xfcc5
SLTATR  equ 0xfcc9
SLTWRK  equ 0xfd09
PROCNM  equ 0xfd89
DEVICE  equ 0xfd99
        ;; Hooks
H_KEYI  equ 0xfd9a
H_TIMI  equ 0xfd9f
H_CHPH  equ 0xfda4
H_DSPC  equ 0xfda9
H_ERAC  equ 0xfdae
H_DSPF  equ 0xfdb3
H_ERAF  equ 0xfdb8
H_TOTE  equ 0xfdbd
H_CHGE  equ 0xfdc2
H_INIP  equ 0xfdc7
H_KEYC  equ 0xfdcc
H_KYEA  equ 0xfdd1
H_NMI   equ 0xfdd6
H_PINL  equ 0xfddb
H_QINL  equ 0xfde0
H_INLI  equ 0xfde5
H_ONGO  equ 0xfdea
H_DSKO  equ 0xfdef
H_SETS  equ 0xfdf4
H_NAME  equ 0xfdf9
H_KILL  equ 0xfdfe
H_IPL   equ 0xfe03
H_COPY  equ 0xfe08
H_CMD   equ 0xfe0d
H_DSKF  equ 0xfe12
H_DSKI  equ 0xfe17
H_ATTR  equ 0xfe1c
H_LSET  equ 0xfe21
H_RSET  equ 0xfe26
H_FIEL  equ 0xfe2b
H_MKI   equ 0xfe30
H_MKS   equ 0xfe35
H_MKD   equ 0xfe3a
H_CVI   equ 0xfe3f
H_CVS   equ 0xfe44
H_CVD   equ 0xfe49
H_GETP  equ 0xfe4e
H_SETF  equ 0xfe53
H_NOFO  equ 0xfe58
H_NULO  equ 0xfe5d
H_NTFL  equ 0xfe62
H_MERG  equ 0xfe67
H_SAVE  equ 0xfe6c
H_BINS  equ 0xfe71
H_BINL  equ 0xfe76
H_FILE  equ 0xfd7b
H_DGET  equ 0xfe80
H_FILO  equ 0xfe85
H_INDS  equ 0xfe8a
H_RSLF  equ 0xfe8f
H_SAVD  equ 0xfe94
H_LOC   equ 0xfe99
H_LOF   equ 0xfe9e
H_EOF   equ 0xfea3
H_FPOS  equ 0xfea8
H_BAKU  equ 0xfead
H_PARD  equ 0xfeb2
H_NODE  equ 0xfeb7
H_POSD  equ 0xfebc
H_DEVN  equ 0xfec1
H_GEND  equ 0xfec6
H_RUNC  equ 0xfecb
H_CLEAR equ 0xfed0
H_LOPD  equ 0xfed5
H_STKE  equ 0xfeda
H_ISFL  equ 0xfedf
H_OUTD  equ 0xfee4
H_CRDO  equ 0xfee9
H_DSKC  equ 0xfeee
H_DOGR  equ 0xfef3
H_PRGE  equ 0xfef8
H_ERRP  equ 0xfefd
H_ERRF  equ 0xff02
H_READ  equ 0xff07
H_MAIN  equ 0xff0c
H_DIRD  equ 0xff11
H_FINI  equ 0xff16
H_FINE  equ 0xff1b
H_CRUN  equ 0xff20
H_CRUS  equ 0xff25
H_ISRE  equ 0xff2a
H_NTFN  equ 0xff2f
H_NOTR  equ 0xff34
H_SNGF  equ 0xff39
H_NEWS  equ 0xff3e
H_GONE  equ 0xff43
H_CHRG  equ 0xff48
H_RETU  equ 0xff4d
H_PRTF  equ 0xff52
H_COMP  equ 0xff57
H_FINP  equ 0xff5c
H_TRMN  equ 0xff61
H_FRME  equ 0xff66
H_NTPL  equ 0xff6b
H_EVAL  equ 0xff70
H_OKNO  equ 0xff75
H_FING  equ 0xff7a
H_ISMI  equ 0xff7f
H_WIDT  equ 0xff84
H_LIST  equ 0xff89
H_BUFL  equ 0xff8e
H_FRQI  equ 0xff93
H_SCNE  equ 0xff98
H_FRET  equ 0xff9d
H_PTRG  equ 0xffa2
H_PHYD  equ 0xffa7
H_FORM  equ 0xffac
H_ERRO  equ 0xffb1
H_LPTO  equ 0xffb6
H_LPTS  equ 0xffbb
H_SCRE  equ 0xffc0
H_PLAY  equ 0xffc5
        ;; For expanded BIOS
FCALL   equ 0xffca
DISINT  equ 0xffcf
ENAINT  equ 0xffd4
